/*
 ğŸ“ã€è¨­å•ã€‘
æ¼”ç®—å­ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ã®ç·åˆç·´ç¿’
ä»¥ä¸‹ã®ä»•æ§˜ã‚’ã™ã¹ã¦æº€ãŸã™C++ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã‚’ä½œæˆã—ãªã•ã„ï¼š
æ§‹é€ ä½“ Point ã‚’ä½œæˆã™ã‚‹ã“ã¨
Point p1{1, 2};
Point p2{3, 4};ã‚’ä½¿ç”¨ã™ã‚‹ã€‚
 
 ãƒ¡ãƒ³ãƒå¤‰æ•° int x, y ã‚’æŒã¤ã€‚
ä»¥ä¸‹ã®æ¼”ç®—å­ã‚’ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ã“ã¨ï¼š
 1)
 +ï¼š
 ã€€Point åŒå£«ã‚’åŠ ç®—ã—ã¦ã€æ–°ã—ã„ Point ã‚’è¿”ã™ã€‚
 2)
 <<ï¼ˆå‡ºåŠ›ï¼‰ï¼š
 ã€€std::cout << p ã§ (x, y) ã®å½¢å¼ã§å‡ºåŠ›ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã€‚
 3)
 ==ï¼š
 ã€€2ã¤ã® Point ã® x, y ãŒåŒã˜ãªã‚‰ç­‰ä¾¡ã¨ã¿ãªã™ã€‚
 4)
 []ï¼ˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æ¼”ç®—å­ï¼‰ï¼š
 ã€€p[0] ã§ xã€p[1] ã§ y ã‚’è¿”ã™ã€‚
 ã€€ãã‚Œä»¥å¤–ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ãŒæ¥ãŸå ´åˆã¯ã‚¨ãƒ©ãƒ¼ã‚’å‡ºã™ã€‚
 5)
 ()ï¼ˆé–¢æ•°å‘¼ã³å‡ºã—æ¼”ç®—å­ï¼‰ï¼š
 ã€€p() ã§ã€x + y ã®åˆè¨ˆã‚’è¿”ã™ã€‚

 â–  main() é–¢æ•°ã§ä»¥ä¸‹ã‚’è¡Œã†ï¼š
 2ã¤ã® Point ã‚’ä½œæˆã—ã€åŠ ç®—ã—ã¦è¡¨ç¤ºã€‚
 == ã‚’ä½¿ã£ã¦æ¯”è¼ƒã€‚, [] ã‚’ä½¿ã£ã¦ x, y ã‚’å€‹åˆ¥ã«è¡¨ç¤ºã€‚() ã‚’ä½¿ã£ã¦ x + y ã®çµæœã‚’è¡¨ç¤ºã€‚
 
 */

#include <iostream>
#include <stdexcept>


struct Point
{
    int x;
    int y;
    
    //1)
    Point operator+(const Point& other)const
    {
        return Point((x+other.x),(y+other.y));
    }
    
    // ãªãœãƒ•ãƒ¬ãƒ³ãƒ‰ã«ã™ã‚‹ã®ã‹
    //2)
    friend std::ostream& operator<<(std::ostream& os, const Point& p)
    {
        os << "(" << p.x << "," << p.y << ")";
        return os;
    }
    
    //3)
    bool operator==(const Point& other)const
    {
        return x == other.x and y == other.y;
    }
    
    //4)æ›¸ãç›´ã™ã“ã¨
    const int& operator[](int index) const
    {
        if (index == 0)
            return x;
        else if (index == 1)
            return y;
        else throw std::out_of_range("Index must be 0 or 1");
    }
    
    //5)
    int operator()() const
    {
        return x + y;
    }

};


int main()
{
    //1 and 2)
    Point p1{1,2};
    Point p2{3,4};
    Point p3 = p1 + p2;
    std::cout << p3 << std::endl;
    
    //3)
    if( p3 == Point(4,6)) // the operator begins to work here.
    {
        std::cout << "Correct"<<std::endl;
    }
    
    //4)
    std::cout<< p3[0]<< std::endl;
    std::cout<< p3[1] << std::endl;
    
    //5)
    std::cout<< p3() << std::endl;
    //p3(); â†’ p3.operator()() ãŒå‘¼ã°ã‚Œã‚‹ï¼
    
 
    return 0;
}









/*
 
 #include <iostream>
 #include <stdexcept>

 struct Point {
     int x, y;

     // 1. åŠ ç®—
     Point operator+(const Point& other) const {
         return Point{x + other.x, y + other.y};
     }

     // 2. å‡ºåŠ›ï¼ˆfriendã§å¤–éƒ¨ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã«ï¼‰
     friend std::ostream& operator<<(std::ostream& os, const Point& p) {
         return os << "(" << p.x << ", " << p.y << ")";
     }

     // 3. ç­‰ä¾¡æ¯”è¼ƒ
     bool operator==(const Point& other) const {
         return x == other.x && y == other.y;
     }

     // 4. æ·»å­—ã‚¢ã‚¯ã‚»ã‚¹ï¼šx=0, y=1
     int& operator[](int index) {
         if (index == 0) return x;
         else if (index == 1) return y;
         else throw std::out_of_range("Index must be 0 or 1");//ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€€std::out_of_range
     }

     const int& operator[](int index) const {
         if (index == 0) return x;
         else if (index == 1) return y;
         else throw std::out_of_range("Index must be 0 or 1");
     }

     // 5. ()ã§x + yã‚’è¿”ã™
     int operator()() const {
         return x + y;
     }
 };

 int main() {
     Point p1{1, 2};
     Point p2{3, 4};

     // åŠ ç®—
     Point p3 = p1 + p2;
     std::cout << "p1 = " << p1 << std::endl;
     std::cout << "p2 = " << p2 << std::endl;
     std::cout << "p1 + p2 = " << p3 << std::endl;

     // æ¯”è¼ƒ
     if (p3 == Point{4, 6}) {
         std::cout << "p3ã¯(4, 6)ã¨ç­‰ã—ã„ã§ã™" << std::endl;
     }

     // æ·»å­—ã‚¢ã‚¯ã‚»ã‚¹
     std::cout << "p3[0] = " << p3[0] << std::endl;
     std::cout << "p3[1] = " << p3[1] << std::endl;

     // é–¢æ•°å‘¼ã³å‡ºã—æ¼”ç®—å­
     std::cout << "p3() = " << p3() << std::endl;

     return 0;
 }

 

 ### âœ… ä¸»èªã‚’æ˜ç¢ºã«ã—ãŸèª¬æ˜ï¼š

 C++ã§ `std::cout << p` ã®ã‚ˆã†ã«å‡ºåŠ›ã‚’è¡Œã†ã¨ãã€
 ã“ã®ã‚³ãƒ¼ãƒ‰ã¯å†…éƒ¨çš„ã«æ¬¡ã®ã‚ˆã†ã«å‘¼ã³å‡ºã•ã‚Œã¾ã™ï¼š

 ```cpp
 operator<<(std::cout, p);
 ```

 ã“ã®ã¨ãã€**å·¦è¾ºã® `std::cout` ã¯ `std::ostream` å‹**ã€
 **å³è¾ºã® `p` ã¯ãƒ¦ãƒ¼ã‚¶ãƒ¼å®šç¾©å‹ `Point`** ã§ã™ã€‚

 ---

 ### â— ã“ã“ã§å•é¡Œã«ãªã‚‹ã®ã¯æ¬¡ã®ç‚¹ã§ã™ï¼š

 * `std::ostream` ã¯ C++æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚¯ãƒ©ã‚¹ã§ã‚ã‚Šã€
   ãã“ã«è‡ªåˆ†ã§ `Point` å‹å°‚ç”¨ã® `<<` ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚
 * ã¤ã¾ã‚Šã€**`<<` ã®ã‚ªãƒ¼ãƒãƒ¼ãƒ­ãƒ¼ãƒ‰ã¯ `Point` å´ãŒç”¨æ„ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚**

 ---

 ### âœ… ãã®ãŸã‚ã€æ¬¡ã®ã‚ˆã†ãªéãƒ¡ãƒ³ãƒé–¢æ•°ã‚’å®šç¾©ã—ã¾ã™ï¼š

 ```cpp
 std::ostream& operator<<(std::ostream& os, const Point& p);
 ```

 ã“ã®é–¢æ•°ã¯ `Point` ã‚¯ãƒ©ã‚¹ã®**å¤–éƒ¨**ã«å®šç¾©ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€
 `p.x` ã‚„ `p.y` ã«**ç›´æ¥ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“ã€‚**

 ---

 ### ğŸ”’ ãã“ã§ç™»å ´ã™ã‚‹ã®ãŒ `friend` ä¿®é£¾å­ã§ã™ï¼š

 `Point` ã‚¯ãƒ©ã‚¹ã®ä¸­ã§ã€ã“ã®é–¢æ•°ã‚’ **`friend`** ã¨ã—ã¦å®£è¨€ã™ã‚‹ã“ã¨ã§ã€
 ãã®é–¢æ•°ã« `Point` ã®å†…éƒ¨ãƒ¡ãƒ³ãƒï¼ˆ`x`, `y`ï¼‰ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å¯ã—ã¾ã™ã€‚

 ---

 ### âœ… æœ€çµ‚çš„ãªã‚³ãƒ¼ãƒ‰ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼š

 ```cpp
 struct Point {
     int x, y;

     // friend ã«ã‚ˆã£ã¦ << ã‚’ Point ã®ã€Œå‹é”ã€ã«ã—ã¦å†…éƒ¨ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å¯
     friend std::ostream& operator<<(std::ostream& os, const Point& p);
 };

 std::ostream& operator<<(std::ostream& os, const Point& p) {
     return os << "(" << p.x << ", " << p.y << ")";
 }
 ```

 ---

 ### ğŸ¯ ã¾ã¨ã‚

 | è¦ç´     | ä¸»èªã‚’æ˜ç¢ºã«ã—ãŸèª¬æ˜                                                |
 | ----- | --------------------------------------------------------- |
 | å·¦è¾º    | `std::cout` ã¯ `std::ostream` å‹ãªã®ã§ `Point` ã‚¯ãƒ©ã‚¹ã®ãƒ¡ãƒ³ãƒé–¢æ•°ã«ã¯ã§ããªã„ |
 | é–¢æ•°ã®å ´æ‰€ | `<<` ã¯ **éãƒ¡ãƒ³ãƒé–¢æ•°**ã¨ã—ã¦å®šç¾©ã—ãªã‘ã‚Œã°ãªã‚‰ãªã„                           |
 | ã‚¢ã‚¯ã‚»ã‚¹æ¨© | éãƒ¡ãƒ³ãƒé–¢æ•°ã¯ `Point` ã® private ãƒ¡ãƒ³ãƒã«ã‚¢ã‚¯ã‚»ã‚¹ã§ããªã„                    |
 | è§£æ±ºæ–¹æ³•  | `Point` ã‚¯ãƒ©ã‚¹å†…ã§ `<<` ã‚’ `friend` ã«ã—ã¦å†…éƒ¨ã‚¢ã‚¯ã‚»ã‚¹ã‚’è¨±å¯ã™ã‚‹              |

 ---



 
 
 

 `else throw std::out_of_range("Index must be 0 or 1");`
 ã¯ã€**ä¾‹å¤–ï¼ˆã‚¨ãƒ©ãƒ¼ï¼‰ã‚’æ˜ç¤ºçš„ã«ç™ºç”Ÿã•ã›ã‚‹æ§‹æ–‡**ã§ã™ã€‚

 ---

 ## âœ… ã“ã®æ§‹æ–‡ã®æ„å‘³ã‚’åˆ†è§£ã™ã‚‹ã¨ï¼š

 ### ğŸ”¹ `throw`ï¼š

 * C++ã«ãŠã‘ã‚‹**ä¾‹å¤–ï¼ˆexceptionï¼‰ã‚’æŠ•ã’ã‚‹ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰**ã§ã™ã€‚
 * ä½•ã‹ç•°å¸¸ï¼ˆãƒã‚°ã€å…¥åŠ›ãƒŸã‚¹ãªã©ï¼‰ãŒç™ºç”Ÿã—ãŸã¨ãã«ä½¿ã„ã¾ã™ã€‚

 ---

 ### ğŸ”¹ `std::out_of_range`ï¼š

 * æ¨™æº–ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ç”¨æ„ã•ã‚ŒãŸ**ä¾‹å¤–ã‚¯ãƒ©ã‚¹**ã®ä¸€ç¨®ã€‚
 * `<stdexcept>` ãƒ˜ãƒƒãƒ€ã§å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚
 * **ã€Œç¯„å›²å¤–ã‚¢ã‚¯ã‚»ã‚¹ã€ã‚’è¡¨ã™ã‚¨ãƒ©ãƒ¼**ã§ã™ã€‚

 ```cpp
 #include <stdexcept>
 ```

 ---

 ### ğŸ”¹ `"Index must be 0 or 1"`ï¼š

 * ä¾‹å¤–ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®**ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ–‡å­—åˆ—**ã§ã™ã€‚
 * ã“ã‚ŒãŒä¾‹å¤–ã¨ã—ã¦è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

 ---

 ## âœ… å…¨ä½“ã®æ„å‘³ï¼š

 ```cpp
 else throw std::out_of_range("Index must be 0 or 1");
 ```

 ### ğŸ”¸ æ—¥æœ¬èªè¨³ï¼š

 ã€Œ`index` ãŒ 0 ã§ã‚‚ 1 ã§ã‚‚ãªã‘ã‚Œã°ã€`out_of_range` ä¾‹å¤–ã‚’æŠ•ã’ã¦ã€
 "Index must be 0 or 1"ï¼ˆã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã¯ 0 ã‹ 1 ã«ã—ã¦ãã ã•ã„ï¼‰ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã›ã‚ˆã€

 ---

 ## ğŸ§ª è£œè¶³ï¼šä¾‹å¤–ãŒæŠ•ã’ã‚‰ã‚ŒãŸã‚‰ã©ã†ãªã‚‹ï¼Ÿ

 ```cpp
 try {
     Point p{1, 2};
     std::cout << p[2];  // â† ã“ã“ã§ out_of_range ãŒæŠ•ã’ã‚‰ã‚Œã‚‹ï¼
 }
 catch (const std::out_of_range& e) {
     std::cerr << "ä¾‹å¤–ç™ºç”Ÿ: " << e.what() << std::endl;
 }
 ```

 ### ğŸ”¸ å®Ÿè¡Œçµæœï¼š

 ```
 ä¾‹å¤–ç™ºç”Ÿ: Index must be 0 or 1
 ```

 ---

 ## âœ… throw æ–‡ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ§‹æ–‡ï¼š

 ```cpp
 throw std::ä¾‹å¤–ã‚¯ãƒ©ã‚¹("ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸");
 ```

 ---

 ## ã‚ˆãä½¿ã†ä¾‹å¤–ã‚¯ãƒ©ã‚¹ï¼š

 | ã‚¯ãƒ©ã‚¹å                    | æ„å‘³          |
 | ----------------------- | ----------- |
 | `std::out_of_range`     | ç¯„å›²å¤–ã‚¢ã‚¯ã‚»ã‚¹     |
 | `std::invalid_argument` | å¼•æ•°ãŒä¸æ­£       |
 | `std::runtime_error`    | å®Ÿè¡Œæ™‚ã®ä¸€èˆ¬çš„ãªã‚¨ãƒ©ãƒ¼ |
 | `std::logic_error`      | ãƒ—ãƒ­ã‚°ãƒ©ãƒ ã®è«–ç†ãƒŸã‚¹  |

 ---

 ã”å¸Œæœ›ã‚ã‚Œã°ã€`throw` ã‚’ä½¿ã£ãŸã‚¨ãƒ©ãƒ¼å‡¦ç†ã®å…¨ä½“è¨­è¨ˆï¼ˆtry-catchå«ã‚€ï¼‰ã‚‚è§£èª¬ã—ã¾ã™ï¼

 
 
 
 
 
 
 
 
 
 */
